/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   cub3d.c                                            :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: mrubina <mrubina@student.42heilbronn.de    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/12/14 19:01:50 by mrubina           #+#    #+#             */
/*   Updated: 2023/12/22 00:10:55 by mrubina          ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */


#include "../include/cub3d.h"

void find_leaks()
{
	system("leaks cub3d");
}

//int	main(int argc, char *argv[])

//function draws a line
void draw_line(t_data *data, int a, int b)
{
	int x;
	int y;
	x = 0;
	y = a*x + b;
	while (x < WIN_W)
	{
		if ( y > 0 && y < WIN_W)
			mlx_put_pixel(data->img, x, y, 0xFF00FFAA);
		x++;
		y = a*x + b;
	}
}

void vert_line(t_data *data, int x, int drawStart, int drawEnd, int color)
{
	int y;

	y = 0;
	while (y >=0 && y < WIN_H)
	{
		if (y > drawStart && y < drawEnd)
			mlx_put_pixel(data->img, x, y, color);
		y++;
	}
}

void set_map(int map[MAP_W][MAP_H])
{
	int x;
	int y;
	x = 0;
	y = 0;
	while (x < MAP_W)
	{
		while (y < MAP_H)
		{
			if ((x == 0 || x == MAP_W - 1) || (y == 0 || y == MAP_H - 1))
				map[x][y] = 1;
			else
				map[x][y] = 0;
			y++;
		}
		x++;
	}
	// map[1][1] = 1;
	// map[3][1] = 1;
	// 1111111111
	// 1000000001
	// 1000000001
	// 1000000001
	// 1000000001
	// 1000000001
	// 1000000001
	// 1000000001
	// 1000p00001
	// 1111111111
}

// void set_map(int map[MAP_W][MAP_H])
// {

// }

void init_data(t_data *data)
{
	data->posX = 13.8;
	data->posY = 14.5;
	data->dirX = -1;
	data->dirY = 0;
	data->planeX = 0;
	data->planeY = 0.66;
	data->time = 0;
	data->oldTime = 0;
	data->x = 0;
	data->hit = 0;
	data->h = 700;
	//set_map(data->map);
	// printf("%i ", data->map[0][0]);
	// printf("%i ", data->map[0][1]);
	// printf("%i ", data->map[1][0]);
	// printf("%i ", data->map[1][1]);
}

void testArr(int map[MAP_H][MAP_W])
{
	printf("%i ", map[0][0]);
}

int n = 45;

	int map[MAP_W][MAP_H]=
{
  {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,2,2,2,2,2,0,0,0,0,3,0,3,0,3,0,0,0,1},
  {1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,3,0,0,0,3,0,0,0,1},
  {1,0,0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,2,2,0,2,2,0,0,0,0,3,0,3,0,3,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,4,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,4,0,0,0,0,5,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,4,0,4,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,4,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
  {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
};



int	main()
{
	printf("%d, ", n);
	//atexit(find_leaks);
	t_data	data;
	data.mlx = mlx_init(WIN_W, WIN_H, "cub3d", 0);
	data.img = mlx_new_image(data.mlx, WIN_W, WIN_H);
	//data.mlx->delta_time = 1;
	init_data(&data);
	mlx_image_to_window(data.mlx, data.img, 0, 0);

// 	int map[MAP_H][MAP_W]=
// {
// 	{3,3,3,3,3,3,3,3,3,3,3,3,3},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{4,0,0,0,0,0,0,0,0,0,0,0,2},
// 	{1,1,1,1,1,1,1,1,1,1,1,1,1}
// };

	
	//testArr(map);
	//data.mlx->delta_time = 1;
	//rayCasting(&data);
	//data.map = &map;
	//raycasting calculation for each pixel in the game window
	
	//vert_line(&data, 100, 5, 600);
	//data.sx = 0;
	//draw_square(&data, 10, 10, 100, WHITE);
	//mlx_put_pixel(data.img, 20, 20, 0xFF00FFFF);
	//draw_line(&data, -2, 1100);
	//printf("%f, ", data.mlx->delta_time);
	//vert_line(&data, (&data)->x, 10, 300, RED);
	mlx_loop_hook(data.mlx, renewSquare, &data);
	mlx_key_hook(data.mlx, key_hook, &data);
	//mlx_mouse_hook(data.mlx, mouse_hook, &data);
	//mlx_loop_hook(data.mlx, )
	mlx_loop(data.mlx);
	mlx_terminate(data.mlx);
	return (0);
}